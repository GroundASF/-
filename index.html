<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>äº”è¡Œä»™é€”å¡ç‰Œå¯¹æˆ˜</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffd700">
</head>
<body>
    <!-- å¼€å§‹ç•Œé¢ -->
    <div id="start-screen" class="screen">
        <div class="title">
            <h1>äº”è¡Œä»™é€”</h1>
            <h2>å¡ç‰Œå¯¹æˆ˜</h2>
        </div>
        <button id="start-game-btn" class="btn-primary">å¼€å§‹æ¸¸æˆ</button>
    </div>

    <!-- ä¿®ä»™é“ä½“é€‰æ‹©ç•Œé¢ -->
    <div id="cultivation-select-screen" class="screen hidden">
        <div class="title">
            <h2>é€‰æ‹©ä¿®ä»™é“ä½“</h2>
        </div>
        <div id="cultivation-options" class="cultivation-grid">
            <!-- ä¿®ä»™é“ä½“é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <!-- çµæ ¹åˆ†é…ç•Œé¢ -->
    <div id="spirit-root-screen" class="screen hidden">
        <div class="title">
            <h2>çµæ ¹è§‰é†’</h2>
        </div>
        <div id="spirit-root-result" class="spirit-root-display">
            <!-- çµæ ¹ç»“æœå°†é€šè¿‡JavaScriptæ˜¾ç¤º -->
            <button id="continue-to-game-btn" class="btn-primary hidden">ç»§ç»­æ¸¸æˆ</button>
        </div>
    </div>

    <!-- å…ˆåæ‰‹å†³å®šç•Œé¢ -->
    <div id="turn-order-screen" class="screen hidden">
        <div class="title">
            <h2>å†³å®šå…ˆåæ‰‹</h2>
        </div>
        <div id="turn-order-animation" class="turn-order-display">
            <div class="player-draw">
                <h3>ä½ æŠ½åˆ°ï¼š</h3>
                <div id="player-draw-card" class="element-card"></div>
            </div>
            <div class="ai-draw">
                <h3>å¯¹æ‰‹æŠ½åˆ°ï¼š</h3>
                <div id="ai-draw-card" class="element-card"></div>
            </div>
        </div>
        <div id="turn-order-result" class="turn-result hidden">
            <!-- å…ˆåæ‰‹ç»“æœ -->
        </div>
        <button id="start-battle-btn" class="btn-primary hidden">å¼€å§‹å¯¹æˆ˜</button>
    </div>

    <!-- ä¸»æ¸¸æˆç•Œé¢ -->
    <div id="game-screen" class="screen hidden">
        <!-- äº”è¡Œç›¸ç”Ÿç›¸å…‹å›¾è¡¨ -->
        <div id="wuxing-chart" class="wuxing-display">
            <svg width="200" height="200" viewBox="0 0 200 200">
                <!-- äº”è§’æ˜Ÿå’Œç›¸ç”Ÿç›¸å…‹å…³ç³»å°†é€šè¿‡JavaScriptç»˜åˆ¶ -->
            </svg>
        </div>

        <!-- å¯¹æ‰‹ä¿¡æ¯ -->
        <div id="ai-info" class="player-info ai-side">
            <div class="player-stats">
                <div class="cultivation-type"><span id="ai-personality-prefix"></span>å¯¹æ‰‹ï¼š<span id="ai-cultivation"></span> | çµæ ¹ï¼š<span id="ai-spirit-root"></span></div>
                <div class="immortal-energy">ä»™å…ƒï¼š<span id="ai-energy">6</span>/<span id="ai-max-energy">6</span></div>
                <div class="hand-count">æ‰‹ç‰Œï¼š<span id="ai-hand-count">3</span></div>
                <div id="ai-shields" class="shields hidden">æŠ¤ç›¾ï¼š<span class="shield-count">0</span></div>
                <div id="ai-skill-points" class="skill-points hidden">ä»™æœ¯ç‚¹ï¼š<span class="skill-count">0</span></div>
                <div id="ai-passive-progress" class="passive-progress hidden"></div>
            </div>
            <div id="ai-hand" class="hand ai-hand">
                <!-- AIæ‰‹ç‰Œï¼ˆèƒŒé¢ï¼‰ -->
            </div>
            <div id="ai-buildings" class="buildings">
                <div class="building-title">å¯¹æ‰‹ä»™åºœï¼š<span id="ai-building-count"></span></div>
                <div class="building-slots">
                    <div class="building-slot" id="ai-building-slot-0">ç©º</div>
                    <div class="building-slot" id="ai-building-slot-1">ç©º</div>
                    <div class="building-slot" id="ai-building-slot-2">ç©º</div>
                    <div class="building-slot" id="ai-building-slot-3">ç©º</div>
                    <div class="building-slot" id="ai-building-slot-4">ç©º</div>
                </div>
            </div>
        </div>

        <!-- æ‰“å‡ºçš„ç‰ŒåŒºåŸŸ - ç§»åˆ°æ›´æ˜¾çœ¼çš„ä½ç½® -->
        <div id="played-cards-area" class="played-cards-area">
            <div class="played-cards-title">æœ¬å›åˆæ‰“å‡ºçš„ç‰Œ</div>
            <div id="played-cards-container" class="played-cards-container">
                <!-- æ‰“å‡ºçš„ç‰Œå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </div>

        <!-- æ¸¸æˆçŠ¶æ€æ˜¾ç¤º -->
        <div id="game-status" class="game-status">
            <div class="status-header">
                <div id="current-turn" class="turn-indicator">å½“å‰å›åˆï¼šç©å®¶</div>
                <div id="action-points" class="action-points">è¡ŒåŠ¨ç‚¹ï¼š1</div>
                <div class="ai-stuck-hint">å¦‚æœAIå¡ä½ï¼Œç‚¹å‡»â“æ¥è§£å†³</div>
                <button id="help-btn" class="help-btn" title="æ¸¸æˆæç¤º">â“</button>
                <button id="sound-toggle" class="sound-toggle" title="åˆ‡æ¢éŸ³æ•ˆ">ğŸ”Š</button>
            <div id="game-log" class="game-log">
                <!-- æ¸¸æˆæ—¥å¿— -->
            </div>
        </div>

        <!-- ç©å®¶ä¿¡æ¯ -->
        <div id="player-info" class="player-info player-side">
            <div class="player-stats">
                <div class="cultivation-type">ä½ ï¼š<span id="player-cultivation"></span></div>
                <div class="spirit-root">çµæ ¹ï¼š<span id="player-spirit-root"></span></div>
                <div class="immortal-energy">ä»™å…ƒï¼š<span id="player-energy">6</span>/<span id="player-max-energy">6</span></div>
                <div class="hand-count">æ‰‹ç‰Œï¼š<span id="player-hand-count">3</span></div>
                <div id="player-shields" class="shields hidden">æŠ¤ç›¾ï¼š<span class="shield-count">0</span></div>
                <div id="player-skill-points" class="skill-points hidden">ä»™æœ¯ç‚¹ï¼š<span class="skill-count">0</span></div>
                <div id="player-passive-progress" class="passive-progress hidden"></div>
            </div>
            <div id="player-hand" class="hand player-hand">
                <!-- ç©å®¶æ‰‹ç‰Œ -->
            </div>
            <div id="player-buildings" class="buildings">
                <div class="building-title">ä½ çš„ä»™åºœï¼š<span id="player-building-count"></span></div>
                <div class="building-slots">
                    <div class="building-slot" id="player-building-slot-0">ç©º</div>
                    <div class="building-slot" id="player-building-slot-1">ç©º</div>
                    <div class="building-slot" id="player-building-slot-2">ç©º</div>
                    <div class="building-slot" id="player-building-slot-3">ç©º</div>
                    <div class="building-slot" id="player-building-slot-4">ç©º</div>
                </div>
            </div>
        </div>

        <!-- è¡ŒåŠ¨æŒ‰é’®åŒºåŸŸ -->
        <div id="action-buttons" class="action-panel">
            <button id="demolish-btn" class="action-btn hidden">æ‹†è§£ä»™åºœ</button>
            <button id="recover-energy-btn" class="action-btn hidden">å›å…ƒè°ƒæ¯</button>
            <button id="use-skill-btn" class="action-btn hidden">ä½¿ç”¨æŠ€èƒ½</button>
            <button id="shield-btn" class="action-btn hidden">ç½¡ç›¾</button>
            <button id="recover-energy-btn" class="action-btn hidden">å›å…ƒè°ƒæ¯</button>
            <button id="draw-card-btn" class="action-btn">å¼•çµ</button>
            <button id="attack-btn" class="action-btn">æ–—æ³•</button>
            <button id="build-btn" class="action-btn">ç­‘åºœ</button>
            <button id="end-turn-btn" class="action-btn hidden">ç»“æŸå›åˆ</button>
        </div>

        <!-- å¼¹çª—åŒºåŸŸ -->
        <div id="modal-overlay" class="modal-overlay hidden">
            <div id="modal-content" class="modal-content">
                <!-- å¼¹çª—å†…å®¹å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- æ¸¸æˆç»“æŸç•Œé¢ -->
    <div id="game-over-screen" class="screen hidden">
        <div class="title">
            <h2 id="game-result">æ¸¸æˆç»“æŸ</h2>
        </div>
        <div id="final-stats" class="final-stats">
            <!-- æœ€ç»ˆç»Ÿè®¡ -->
        </div>
        <button id="restart-btn" class="btn-primary">é‡æ–°å¼€å§‹</button>
    </div>

    <script src="game.js"></script>

    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('SW registered: ', registration);
                    })
                    .catch(function(registrationError) {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
